name: "Push OCI Archive To Remote Registry"
description: "Push an OCI Archive generated by docker/build-push-action to a remote registry"
inputs:
  archive:
    description: "Path to OCI Archive generated by docker/build-push-action"
    required: true
  repository:
    description: "Remote Docker Image repository, e.g: ghcr.io/shrink/example"
    required: true
    default: "ghcr.io/${{ github.repository }}"
  tag:
    description: "Image tag, e.g: v1.0.0"
    required: true
    default: "latest"
runs:
  using: "composite"
  steps:
    - name: Push OCI Archive To Registry
      shell: bash
      run: |
        skopeo copy --all \
        "oci-archive:${{ inputs.archive }}" \
        "docker://${{ inputs.repository }}:${{ inputs.tag }}"
